# 概要

GROUP BY構文の簡単なサンプルです
sakillaデータベースから抽出しています。


### 特定の顧客が支払った最大値を表示したい。
paymentテーブルには特定の顧客 (customer_id)ごとに支払った金額のレコードが全て記録されています。
顧客ごとに最大の支払い金額を表示します。

```
mysql> SELECT MAX(amount), customer_id FROM payment GROUP BY customer_id LIMIT 10;
+-------------+-------------+
| MAX(amount) | customer_id |
+-------------+-------------+
|        9.99 |           1 |
|       10.99 |           2 |
|       10.99 |           3 |
|        8.99 |           4 |
|        9.99 |           5 |
|        7.99 |           6 |
|        8.99 |           7 |
|        9.99 |           8 |
|        7.99 |           9 |
|        8.99 |          10 |
+-------------+-------------+
10 rows in set (0.01 sec)
```

顧客ごとのレコード件数(COUNT)、顧客の総支払額(SUM)などももとめることが可能です。

```
mysql> SELECT COUNT(amount), SUM(amount), MAX(amount), customer_id FROM payment GROUP BY customer_id LIMIT 10;
+---------------+-------------+-------------+-------------+
| COUNT(amount) | SUM(amount) | MAX(amount) | customer_id |
+---------------+-------------+-------------+-------------+
|            32 |      118.68 |        9.99 |           1 |
|            27 |      128.73 |       10.99 |           2 |
|            26 |      135.74 |       10.99 |           3 |
|            22 |       81.78 |        8.99 |           4 |
|            38 |      144.62 |        9.99 |           5 |
|            28 |       93.72 |        7.99 |           6 |
|            33 |      151.67 |        8.99 |           7 |
|            24 |       92.76 |        9.99 |           8 |
|            23 |       89.77 |        7.99 |           9 |
|            25 |       99.75 |        8.99 |          10 |
+---------------+-------------+-------------+-------------+
10 rows in set (0.01 sec)
```
