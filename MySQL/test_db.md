# test_dbについて
大規模なレコードが入ったデータを使って簡単なテストをしたいような場合には以下のデータベースは非常に有用です。
- https://github.com/datacharmer/test_db.git

# 詳細

### brewによるmysqlインストール
以下はメモ
```
$ sudo brew install mysql
$ sudo chown -R _mysql:_mysql /usr/local/var/mysql
$ sudo mysql.server start
$ mysql -uroot
```

- 参考
 - http://qiita.com/hkusu/items/cda3e8461e7a46ecf25d

### テストデータを使ってMySQLを弄る
以下のレポジトリにmysqlのサンプルデータが利用可能なレポジトリがあるようです。
こちらを利用してみます。

初期インストール後のMySQLならばインストールしてgit cloneして流し込むだけで即座に利用できます。
```
$ git clone https://github.com/datacharmer/test_db.git
$ cd test_db
$ mysql -uroot < employees_partitioned.sql
```

```
$ mysql -uroot
mysql> use employees;
mysql> show tables;
+----------------------+
| Tables_in_employees  |
+----------------------+
| current_dept_emp     |
| departments          |
| dept_emp             |
| dept_emp_latest_date |
| dept_manager         |
| employees            |
| salaries             |
| titles               |
+----------------------+
8 rows in set (0.00 sec)

mysql> desc current_dept_emp;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| emp_no    | int(11) | NO   |     | NULL    |       |
| dept_no   | char(4) | NO   |     | NULL    |       |
| from_date | date    | YES  |     | NULL    |       |
| to_date   | date    | YES  |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
4 rows in set (0.00 sec)

mysql> desc departments;
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| dept_no   | char(4)     | NO   | PRI | NULL    |       |
| dept_name | varchar(40) | NO   | UNI | NULL    |       |
+-----------+-------------+------+-----+---------+-------+
2 rows in set (0.01 sec)

mysql> desc dept_emp;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| emp_no    | int(11) | NO   | PRI | NULL    |       |
| dept_no   | char(4) | NO   | PRI | NULL    |       |
| from_date | date    | NO   |     | NULL    |       |
| to_date   | date    | NO   |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
4 rows in set (0.00 sec)


mysql> desc dept_emp_latest_date;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| emp_no    | int(11) | NO   |     | NULL    |       |
| from_date | date    | YES  |     | NULL    |       |
| to_date   | date    | YES  |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
3 rows in set (0.00 sec)


mysql> desc dept_manager;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| emp_no    | int(11) | NO   | PRI | NULL    |       |
| dept_no   | char(4) | NO   | PRI | NULL    |       |
| from_date | date    | NO   |     | NULL    |       |
| to_date   | date    | NO   |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
4 rows in set (0.00 sec)


mysql> desc employees;
+------------+---------------+------+-----+---------+-------+
| Field      | Type          | Null | Key | Default | Extra |
+------------+---------------+------+-----+---------+-------+
| emp_no     | int(11)       | NO   | PRI | NULL    |       |
| birth_date | date          | NO   |     | NULL    |       |
| first_name | varchar(14)   | NO   |     | NULL    |       |
| last_name  | varchar(16)   | NO   |     | NULL    |       |
| gender     | enum('M','F') | NO   |     | NULL    |       |
| hire_date  | date          | NO   |     | NULL    |       |
+------------+---------------+------+-----+---------+-------+
6 rows in set (0.00 sec)

mysql> desc salaries;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| emp_no    | int(11) | NO   | PRI | NULL    |       |
| salary    | int(11) | NO   |     | NULL    |       |
| from_date | date    | NO   | PRI | NULL    |       |
| to_date   | date    | NO   |     | NULL    |       |
+-----------+---------+------+-----+---------+-------+
4 rows in set (0.00 sec)

mysql> desc titles;
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| emp_no    | int(11)     | NO   | PRI | NULL    |       |
| title     | varchar(50) | NO   | PRI | NULL    |       |
| from_date | date        | NO   | PRI | NULL    |       |
| to_date   | date        | YES  |     | NULL    |       |
+-----------+-------------+------+-----+---------+-------+
4 rows in set (0.01 sec)

```

データの例
```

mysql> select * from current_dept_emp limit 10;
+--------+---------+------------+------------+
| emp_no | dept_no | from_date  | to_date    |
+--------+---------+------------+------------+
|  10001 | d005    | 1986-06-26 | 9999-01-01 |
|  10002 | d007    | 1996-08-03 | 9999-01-01 |
|  10003 | d004    | 1995-12-03 | 9999-01-01 |
|  10004 | d004    | 1986-12-01 | 9999-01-01 |
|  10005 | d003    | 1989-09-12 | 9999-01-01 |
|  10006 | d005    | 1990-08-05 | 9999-01-01 |
|  10007 | d008    | 1989-02-10 | 9999-01-01 |
|  10008 | d005    | 1998-03-11 | 2000-07-31 |
|  10009 | d006    | 1985-02-18 | 9999-01-01 |
|  10010 | d006    | 2000-06-26 | 9999-01-01 |
+--------+---------+------------+------------+
10 rows in set (0.58 sec)

mysql> select * from departments;
+---------+--------------------+
| dept_no | dept_name          |
+---------+--------------------+
| d009    | Customer Service   |
| d005    | Development        |
| d002    | Finance            |
| d003    | Human Resources    |
| d001    | Marketing          |
| d004    | Production         |
| d006    | Quality Management |
| d008    | Research           |
| d007    | Sales              |
+---------+--------------------+
9 rows in set (0.02 sec)

mysql> select * from dept_emp limit 10;
+--------+---------+------------+------------+
| emp_no | dept_no | from_date  | to_date    |
+--------+---------+------------+------------+
|  10001 | d005    | 1986-06-26 | 9999-01-01 |
|  10002 | d007    | 1996-08-03 | 9999-01-01 |
|  10003 | d004    | 1995-12-03 | 9999-01-01 |
|  10004 | d004    | 1986-12-01 | 9999-01-01 |
|  10005 | d003    | 1989-09-12 | 9999-01-01 |
|  10006 | d005    | 1990-08-05 | 9999-01-01 |
|  10007 | d008    | 1989-02-10 | 9999-01-01 |
|  10008 | d005    | 1998-03-11 | 2000-07-31 |
|  10009 | d006    | 1985-02-18 | 9999-01-01 |
|  10010 | d004    | 1996-11-24 | 2000-06-26 |
+--------+---------+------------+------------+
10 rows in set (0.00 sec)

mysql> select * from dept_emp_latest_date limit 10;
+--------+------------+------------+
| emp_no | from_date  | to_date    |
+--------+------------+------------+
|  10001 | 1986-06-26 | 9999-01-01 |
|  10002 | 1996-08-03 | 9999-01-01 |
|  10003 | 1995-12-03 | 9999-01-01 |
|  10004 | 1986-12-01 | 9999-01-01 |
|  10005 | 1989-09-12 | 9999-01-01 |
|  10006 | 1990-08-05 | 9999-01-01 |
|  10007 | 1989-02-10 | 9999-01-01 |
|  10008 | 1998-03-11 | 2000-07-31 |
|  10009 | 1985-02-18 | 9999-01-01 |
|  10010 | 2000-06-26 | 9999-01-01 |
+--------+------------+------------+
10 rows in set (0.59 sec)


mysql> select * from dept_manager limit 10;
+--------+---------+------------+------------+
| emp_no | dept_no | from_date  | to_date    |
+--------+---------+------------+------------+
| 110022 | d001    | 1985-01-01 | 1991-10-01 |
| 110039 | d001    | 1991-10-01 | 9999-01-01 |
| 110085 | d002    | 1985-01-01 | 1989-12-17 |
| 110114 | d002    | 1989-12-17 | 9999-01-01 |
| 110183 | d003    | 1985-01-01 | 1992-03-21 |
| 110228 | d003    | 1992-03-21 | 9999-01-01 |
| 110303 | d004    | 1985-01-01 | 1988-09-09 |
| 110344 | d004    | 1988-09-09 | 1992-08-02 |
| 110386 | d004    | 1992-08-02 | 1996-08-30 |
| 110420 | d004    | 1996-08-30 | 9999-01-01 |
+--------+---------+------------+------------+
10 rows in set (0.00 sec)

mysql> select * from employees limit 10;
+--------+------------+------------+-----------+--------+------------+
| emp_no | birth_date | first_name | last_name | gender | hire_date  |
+--------+------------+------------+-----------+--------+------------+
|  10001 | 1953-09-02 | Georgi     | Facello   | M      | 1986-06-26 |
|  10002 | 1964-06-02 | Bezalel    | Simmel    | F      | 1985-11-21 |
|  10003 | 1959-12-03 | Parto      | Bamford   | M      | 1986-08-28 |
|  10004 | 1954-05-01 | Chirstian  | Koblick   | M      | 1986-12-01 |
|  10005 | 1955-01-21 | Kyoichi    | Maliniak  | M      | 1989-09-12 |
|  10006 | 1953-04-20 | Anneke     | Preusig   | F      | 1989-06-02 |
|  10007 | 1957-05-23 | Tzvetan    | Zielinski | F      | 1989-02-10 |
|  10008 | 1958-02-19 | Saniya     | Kalloufi  | M      | 1994-09-15 |
|  10009 | 1952-04-19 | Sumant     | Peac      | F      | 1985-02-18 |
|  10010 | 1963-06-01 | Duangkaew  | Piveteau  | F      | 1989-08-24 |
+--------+------------+------------+-----------+--------+------------+
10 rows in set (0.00 sec)


mysql> select * from salaries limit 10;
+--------+--------+------------+------------+
| emp_no | salary | from_date  | to_date    |
+--------+--------+------------+------------+
|  10009 |  60929 | 1985-02-18 | 1986-02-18 |
|  10013 |  40000 | 1985-10-20 | 1986-10-20 |
|  10048 |  40000 | 1985-02-24 | 1986-02-24 |
|  10064 |  40000 | 1985-11-20 | 1986-11-20 |
|  10070 |  55999 | 1985-10-14 | 1986-10-14 |
|  10098 |  40000 | 1985-05-13 | 1986-05-13 |
|  10126 |  40000 | 1985-09-08 | 1986-09-08 |
|  10133 |  40000 | 1985-12-15 | 1986-12-15 |
|  10137 |  40000 | 1985-02-18 | 1986-02-18 |
|  10144 |  56720 | 1985-10-14 | 1986-10-14 |
+--------+--------+------------+------------+
10 rows in set (0.01 sec)


mysql> select * from titles  limit 10;
+--------+--------------------+------------+------------+
| emp_no | title              | from_date  | to_date    |
+--------+--------------------+------------+------------+
|  10009 | Assistant Engineer | 1985-02-18 | 1990-02-18 |
|  10013 | Senior Staff       | 1985-10-20 | 9999-01-01 |
|  10048 | Engineer           | 1985-02-24 | 1987-01-27 |
|  10064 | Staff              | 1985-11-20 | 1992-03-02 |
|  10070 | Technique Leader   | 1985-10-14 | 9999-01-01 |
|  10098 | Engineer           | 1985-05-13 | 1992-05-13 |
|  10126 | Staff              | 1985-09-08 | 1991-09-08 |
|  10133 | Engineer           | 1985-12-15 | 1991-12-15 |
|  10137 | Staff              | 1985-02-18 | 1994-02-18 |
|  10144 | Staff              | 1985-10-14 | 1992-10-14 |
+--------+--------------------+------------+------------+
10 rows in set (0.01 sec)
```

### いくつかのデータを完全マッチで取得する。
```
mysql> select * from departments where dept_no in ('d009', 'd002');
+---------+------------------+
| dept_no | dept_name        |
+---------+------------------+
| d002    | Finance          |
| d009    | Customer Service |
+---------+------------------+
2 rows in set (0.02 sec)
```

### VIEW一覧を表示する
- http://stackoverflow.com/questions/2834016/how-to-get-a-list-of-mysql-views
